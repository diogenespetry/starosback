import{z as f,y as x,r,o as b,N as d,a as w,b as V,d as h,e as t,f as s,k as v,u as _,I as k,m as u,l as i,q as U}from"./index-BkiFMBGU.js";import{Q as q}from"./QSelect-0dw-sqvU.js";import{Q as E}from"./QForm-QQlO4h6a.js";const N={class:"tw:container tw:mx-auto tw:py-[20px] tw:px-4 tw:sm:px-6 tw:lg:px-8"},D={class:"tw:flex tw:items-center tw:gap-4"},I={class:"tw:mt-4 tw:border tw:border-gray-200 tw:rounded-xl tw:px-4 tw:py-4 tw:dark:bg-[#1F2A37] tw:dark:border-0"},Q={class:"row q-col-gutter-md tw:my-4"},S={class:"col-3"},z={class:"row q-col-gutter-md tw:my-4"},C={class:"col-6"},R={class:"col-6"},A={class:"row q-col-gutter-md tw:my-4"},B={class:"col-6"},M={class:"col-6"},F={class:"row justify-end q-gutter-sm q-mt-md"},H={__name:"EditarUsuario",setup($){const g=f(),m=x(),p=r(null),c=r(!1),n=r(""),o=r({name:"",email:"",senha:"",access_level:""});b(async()=>{try{const l=g.params.id;if(!l||isNaN(l)){d.create({type:"negative",message:"ID do usuário inválido!",position:"top"}),m.push("/usuarios");return}const{data:e}=await w.get(`/usuarios/${l}`);o.value=e,n.value=e.id}catch(l){console.error("Erro ao carregar usuario:",l)}});async function y(){if(c.value)return;if(!await p.value.validate()){d.create({type:"negative",message:"Preencha os campos obrigatórios corretamente!",position:"top"});return}try{await w.patch(`/usuarios/${o.value.id}`,o.value),m.push("/usuarios")}catch(e){console.error("Erro ao editar usuario:",e),d.create({message:"Não foi possível editar o usuario",color:"negative",position:"top",timeout:4e3})}}return(l,e)=>(h(),V("div",null,[t("div",N,[t("div",D,[s(u,{flat:"",dense:"",color:"blue-6",to:"/usuarios"},{default:v(()=>[s(_(k),{icon:"tabler:chevron-left",class:"tw:text-3xl"})]),_:1}),e[5]||(e[5]=t("div",null,[t("p",{class:"q-mb-none tw:text-[30px] tw:font-bold"},"Editar Usuário"),t("p",{class:"q-mb-none tw:text-[16px] tw:leading-[24px]"},"Edite as informações do usuário")],-1))]),t("div",I,[e[11]||(e[11]=t("p",{class:"q-mb-none tw:text-[20px] tw:font-bold tw:text-[#292a2e] tw:dark:text-[#bfc1c4]"}," Informações do Usuário ",-1)),s(E,{style:{margin:"12px 0"},onSubmit:U(y,["prevent"]),ref_key:"formRef",ref:p},{default:v(()=>[t("div",Q,[t("div",S,[e[6]||(e[6]=t("label",{class:"tw:text-gray-500 tw:dark:text-gray-200"},"ID do usuário",-1)),s(i,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=a=>n.value=a),readonly:"",outlined:"",dense:""},null,8,["modelValue"])])]),t("div",z,[t("div",C,[e[7]||(e[7]=t("label",{class:"tw:text-gray-500 tw:dark:text-gray-200"},"Nome",-1)),s(i,{modelValue:o.value.name,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.name=a),placeholder:"Digite o nome do cliente",outlined:"",dense:"",rules:[a=>!!a||"Campo obrigatório"],"hide-bottom-space":"","lazy-rules":"ondemand"},null,8,["modelValue","rules"])]),t("div",R,[e[8]||(e[8]=t("label",{class:"tw:text-gray-500 tw:dark:text-gray-200"},"Email",-1)),s(i,{modelValue:o.value.email,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.email=a),placeholder:"email@example.com",outlined:"",dense:"",type:"email",rules:[a=>!!a||"Campo obrigatório"],"hide-bottom-space":"","lazy-rules":"ondemand"},null,8,["modelValue","rules"])])]),t("div",A,[t("div",B,[e[9]||(e[9]=t("label",{class:"tw:text-gray-500 tw:dark:text-gray-200"},"Senha",-1)),s(i,{modelValue:o.value.senha,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.senha=a),placeholder:"Digite a senha",type:"password",outlined:"",dense:"",rules:[a=>!a||a.length>=8||"A senha deve ter pelo menos 8 caracteres"],"lazy-rules":"ondemand",hint:"Deixe o campo em branco para não alterar a senha"},null,8,["modelValue","rules"])]),t("div",M,[e[10]||(e[10]=t("label",{class:"tw:text-gray-500 tw:dark:text-gray-200"},"Nível de acesso",-1)),s(q,{modelValue:o.value.access_level,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.access_level=a),placeholder:"Selecione o nível de acesso",options:[{label:"Administrador",value:"ADM"},{label:"Usuário",value:"USER"}],"map-options":"","emit-value":"",outlined:"",dense:"",rules:[a=>!!a||"Campo obrigatório"],"hide-bottom-space":"","lazy-rules":"ondemand"},null,8,["modelValue","rules"])])]),t("div",F,[s(u,{label:"Cancelar",flat:"",to:"/usuarios"}),s(u,{label:"Salvar",color:"primary",type:"submit",outlined:"",loading:c.value,icon:"check"},null,8,["loading"])])]),_:1},512)])])]))}};export{H as default};
