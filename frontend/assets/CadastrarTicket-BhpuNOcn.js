import{y as _,r as n,o as C,a as w,N as u,b as V,d as h,e as t,f as a,k as r,u as N,I as Q,m as p,l as v,q}from"./index-BgI7K-Vp.js";import{Q as I,a as B,b as E}from"./QSelect-Zjkj59qm.js";import{Q as T}from"./QForm-BB0dN-Hh.js";const F={class:"tw:container tw:mx-auto tw:py-[20px] tw:px-4 tw:sm:px-6 tw:lg:px-8"},R={class:"tw:flex tw:items-center tw:gap-4"},S={class:"tw:mt-4 tw:border tw:border-gray-200 tw:rounded-xl tw:px-4 tw:py-4 tw:dark:bg-[#1F2A37] tw:dark:border-0"},U={class:"row q-col-gutter-md tw:my-4"},z={class:"col-6"},D={class:"col-6"},L={class:"row tw:my-4"},M={class:"col-12"},O={class:"row justify-end q-gutter-sm q-mt-md"},H={__name:"CadastrarTicket",setup(j){const g=_(),m=n(null),f=n(!1),d=n(!1),i=n([]),c=n([]),s=n({title:"",description:"",cliente_id:void 0});C(async()=>{await x()});async function x(){try{d.value=!0;const l=await w.get("clientes");i.value=l.data,c.value=l.data}catch(l){console.error("Erro ao carregar clientes:",l),u.create({message:"Erro ao carregar clientes",color:"negative",position:"top"})}finally{d.value=!1}}function b(l,e){e(()=>{if(l==="")i.value=c.value;else{const o=l.toLowerCase();i.value=c.value.filter(k=>k.nome.toLowerCase().indexOf(o)>-1)}})}async function y(){if(f.value)return;if(!await m.value.validate()){u.create({type:"negative",message:"Preencha os campos obrigatórios corretamente!",position:"top"});return}try{await w.post("tickets",s.value),g.push("/tickets")}catch(e){console.error("Erro ao criar ticket:",e),u.create({message:"Não foi possível cadastrar o ticket",color:"negative",position:"top",timeout:4e3})}}return(l,e)=>(h(),V("div",null,[t("div",F,[t("div",R,[a(p,{flat:"",dense:"",color:"blue-6",to:"/tickets"},{default:r(()=>[a(N(Q),{icon:"tabler:chevron-left",class:"tw:text-3xl"})]),_:1}),e[3]||(e[3]=t("div",null,[t("p",{class:"q-mb-none tw:text-[30px] tw:font-bold"},"Novo Ticket"),t("p",{class:"q-mb-none tw:text-[16px] tw:leading-[24px]"},"Cadastre um novo ticket de suporte")],-1))]),t("div",S,[e[8]||(e[8]=t("p",{class:"q-mb-none tw:text-[20px] tw:font-bold tw:text-[#292a2e] tw:dark:text-[#bfc1c4]"}," Informações do Ticket ",-1)),a(T,{style:{margin:"12px 0"},onSubmit:q(y,["prevent"]),ref_key:"formRef",ref:m},{default:r(()=>[t("div",U,[t("div",z,[e[4]||(e[4]=t("label",{class:"tw:text-gray-500 tw:dark:text-gray-200"},"Titulo *",-1)),a(v,{modelValue:s.value.title,"onUpdate:modelValue":e[0]||(e[0]=o=>s.value.title=o),placeholder:"Digite o título do ticket",outlined:"",dense:"",rules:[o=>!!o||"Campo obrigatório"],"hide-bottom-space":""},null,8,["modelValue","rules"])]),t("div",D,[e[6]||(e[6]=t("label",{class:"tw:text-gray-500 tw:dark:text-gray-200"},"Cliente (opcional)",-1)),a(I,{modelValue:s.value.cliente_id,"onUpdate:modelValue":e[1]||(e[1]=o=>s.value.cliente_id=o),options:i.value,"option-label":"nome","option-value":"id","emit-value":"","map-options":"",dense:"",outlined:"",placeholder:"Vincule a um cliente","no-option-found-label":"Nenhum cliente encontrado",loading:d.value,clearable:"","use-input":"","input-debounce":"300",onFilter:b},{"no-option":r(()=>[a(B,null,{default:r(()=>[a(E,{class:"text-grey"},{default:r(()=>[...e[5]||(e[5]=[t("div",null,[t("div",{class:"text-body2"},"Nenhum cliente encontrado")],-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","loading"])])]),t("div",L,[t("div",M,[e[7]||(e[7]=t("label",{class:"tw:text-gray-500 tw:dark:text-gray-200"},"Descrição *",-1)),a(v,{"input-style":{resize:"none"},modelValue:s.value.description,"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.description=o),placeholder:"Informe uma descrição...",dense:"",outlined:"",type:"textarea",color:"grey-5",rows:5,maxlength:2048,style:{margin:"8px 0",flex:"1",resize:"none"},rules:[o=>!!o||"Campo obrigatório"],"hide-bottom-space":""},null,8,["modelValue","rules"])])]),t("div",O,[a(p,{label:"Cancelar",flat:"",to:"/tickets"}),a(p,{label:"Cadastrar",color:"primary",type:"submit",outlined:"",loading:f.value,icon:"check"},null,8,["loading"])])]),_:1},512)])])]))}};export{H as default};
