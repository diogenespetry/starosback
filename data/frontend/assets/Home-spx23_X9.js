import{r as p,c as x,o as h,a as k,N as C,b as d,d as c,e as t,f as w,Q as T,t as u,F as q,g as j,n as D,P as B,h as F,i as E,w as M,j as $,v as N,u as g,I as _}from"./index-fwj_z4MF.js";const S={class:"tw:container tw:mx-auto tw:py-[20px]"},L={class:"tw:rounded-lg tw:border tw:bg-white tw:border-gray-200 tw:shadow-sm tw:dark:bg-[#1F2A37] tw:dark:border-0 tw:dark:shadow-lg tw:p-4"},O={key:0,class:"tw:flex tw:items-center tw:justify-center tw:py-8"},V={key:1},Y={key:0,class:"tw:text-red-500 tw:dark:text-red-400 tw:py-2"},z={key:1,class:"tw:flex tw:flex-col tw:gap-3"},P={class:"tw:w-48 tw:text-sm tw:text-gray-700 tw:dark:text-gray-200"},U={class:"tw:flex-1 tw:h-4 tw:bg-gray-200 tw:rounded tw:dark:bg-[#111827]"},I={class:"tw:w-12 tw:text-right tw:text-sm tw:text-gray-700 tw:dark:text-gray-200"},Q={__name:"estatisticasPorStatus",setup(y){const o=p([]),l=p(!1),n=p(""),a=[{id:1,nome:"Aberto"},{id:2,nome:"Em execução"},{id:3,nome:"Aguardando cliente"},{id:4,nome:"Encerrado"},{id:5,nome:"Reaberto"},{id:6,nome:"Cancelado"}],b=x(()=>o.value.length?Math.max(...o.value.map(r=>r.total)):1);function f(r){const e=b.value||1;return Math.round(r/e*100)+"%"}function v(r){return{1:"#F59E0B",2:"#10B981",3:"#3B82F6",4:"#6366F1",5:"#F43F5E",6:"#9CA3AF"}[r]||"#3C83F6"}return h(async()=>{try{l.value=!0;const{data:r}=await k.get("/estatisticas/tickets_por_status"),e=Array.isArray(r)?r:[],s=new Map(e.map(i=>[i.status_id,i]));o.value=a.map(i=>({status_id:i.id,status_nome:i.nome,total:s.get(i.id)?.total||0}))}catch(r){n.value=r?.response?.data?.message||"Não foi possível carregar as estatísticas.",C.create({message:n.value,color:"negative",position:"top"})}finally{l.value=!1}}),(r,e)=>(c(),d("div",S,[t("div",L,[e[0]||(e[0]=t("div",{class:"tw:flex tw:items-center tw:justify-between tw:mb-4"},[t("p",{class:"q-mb-none tw:text-[20px] tw:font-bold tw:text-[#292a2e] tw:dark:text-[#bfc1c4]"},"Tickets por Status")],-1)),l.value?(c(),d("div",O,[w(T,{color:"blue-6",size:"2em"})])):(c(),d("div",V,[n.value?(c(),d("div",Y,u(n.value),1)):(c(),d("div",z,[(c(!0),d(q,null,j(o.value,s=>(c(),d("div",{key:s.status_id,class:"tw:flex tw:items-center tw:gap-3"},[t("div",P,u(s.status_nome),1),t("div",U,[t("div",{class:"tw:h-4 tw:rounded",style:D({width:f(s.total),backgroundColor:v(s.status_id)})},null,4)]),t("div",I,u(s.total),1)]))),128))]))]))])]))}},R={class:"tw:container tw:mx-auto"},H={class:"tw:rounded-lg tw:border tw:bg-white tw:border-gray-200 tw:shadow-sm tw:dark:bg-[#1F2A37] tw:dark:border-0 tw:dark:shadow-lg tw:p-4"},W={class:"tw:relative"},G={key:0,class:"tw:text-red-500 tw:dark:text-red-400 tw:py-2"},J={key:1,class:"tw:absolute tw:inset-0 tw:flex tw:items-center tw:justify-center tw:bg-white/50 tw:dark:bg-[#1F2A37]/50"},K={__name:"estatisticasUltimos7Dias",setup(y){const o=p(!1),l=p(""),n=p([]),a=x(()=>B.isActive),b=x(()=>{const e=F(),s=[],i=new Map(n.value.map(m=>[m.dia,m.total]));for(let m=6;m>=0;m--){const A=e.clone().subtract(m,"days").format("YYYY-MM-DD");s.push({data:A,total:i.get(A)||0})}return s}),f=x(()=>[{name:"Tickets",data:b.value.map(e=>e.total)}]),v=x(()=>{const e=a.value?"#d1d5db":"#374151",s=a.value?"#334155":"#e5e7eb";return{chart:{toolbar:{show:!1},animations:{enabled:!0},background:"transparent"},theme:{mode:a.value?"dark":"light"},plotOptions:{bar:{columnWidth:"50%",borderRadius:6}},dataLabels:{enabled:!1},grid:{borderColor:s,strokeDashArray:4},xaxis:{categories:b.value.map(i=>r(i.data)),labels:{style:{colors:Array(b.value.length).fill(e)}},axisBorder:{color:s},axisTicks:{color:s}},yaxis:{labels:{style:{colors:[e]}}},tooltip:{theme:a.value?"dark":"light"},colors:["#3C83F6"]}});function r(e){return F(e).format("DD/MM")}return h(async()=>{try{o.value=!0;const{data:e}=await k.get("/estatisticas/tickets_por_dia");n.value=Array.isArray(e)?e:[]}catch(e){l.value=e?.response?.data?.message||"Não foi possível carregar as estatísticas.",C.create({message:l.value,color:"negative",position:"top"})}finally{o.value=!1}}),(e,s)=>{const i=E("apexchart");return c(),d("div",R,[t("div",H,[s[0]||(s[0]=t("div",{class:"tw:flex tw:items-center tw:justify-between tw:mb-4"},[t("p",{class:"q-mb-none tw:text-[20px] tw:font-bold tw:text-[#292a2e] tw:dark:text-[#bfc1c4]"}," Tickets nos últimos 7 dias ")],-1)),t("div",W,[M(w(i,{type:"bar",height:"260",options:v.value,series:f.value},null,8,["options","series"]),[[N,!l.value]]),l.value?(c(),d("div",G,u(l.value),1)):$("",!0),o.value?(c(),d("div",J,[w(T,{color:"blue-6",size:"2em"})])):$("",!0)])])])}}},X={class:"tw:bg-[#FAFAFA] tw:dark:bg-[#0F1629] tw:h-[calc(100dvh-64px)]"},Z={class:"tw:container tw:mx-auto tw:py-[20px] tw:px-4 tw:sm:px-6 tw:lg:px-8"},tt={class:"tw:my-4"},et={class:"tw:grid tw:grid-cols-1 tw:md:grid-cols-2 tw:lg:grid-cols-4 tw:gap-4"},st={class:"tw:rounded-lg tw:border tw:dark:border-0 tw:bg-white tw:dark:bg-[#1F2A37] tw:border-gray-200 tw:shadow-sm tw:p-6"},at={class:"tw:flex tw:justify-between tw:items-center"},ot={class:"q-mb-none tw:text-[30px] tw:font-bold"},rt={class:"tw:rounded-lg tw:border tw:dark:border-0 tw:bg-white tw:dark:bg-[#1F2A37] tw:border-gray-200 tw:shadow-sm tw:p-6"},nt={class:"tw:flex tw:justify-between tw:items-center"},it={class:"q-mb-none tw:text-[30px] tw:font-bold"},lt={class:"tw:rounded-lg tw:border tw:dark:border-0 tw:bg-white tw:dark:bg-[#1F2A37] tw:border-gray-200 tw:shadow-sm tw:p-6"},dt={class:"tw:flex tw:justify-between tw:items-center"},ct={class:"q-mb-none tw:text-[30px] tw:font-bold"},wt={class:"tw:rounded-lg tw:border tw:dark:border-0 tw:bg-white tw:dark:bg-[#1F2A37] tw:border-gray-200 tw:shadow-sm tw:p-6"},ut={class:"tw:flex tw:justify-between tw:items-center"},pt={class:"q-mb-none tw:text-[30px] tw:font-bold"},bt={__name:"Home",setup(y){const o=p({totalTickets:0,totalTicketsNaoEncerradosOuCancelados:0,totalClientes:0,totalUsuarios:0});h(()=>{l()});async function l(){try{const n=await k.get("/estatisticas");o.value=n.data}catch(n){console.error(n)}}return(n,a)=>(c(),d("div",X,[t("div",Z,[a[4]||(a[4]=t("div",{class:"tw:flex tw:items-center tw:justify-between"},[t("div",null,[t("p",{class:"q-mb-none tw:text-[30px] tw:font-bold"},"Dashboard"),t("p",{class:"q-mb-none tw:text-[16px] tw:leading-[24px]"},"Visão geral do sistema de tickets")])],-1)),t("div",tt,[t("div",et,[t("div",st,[t("div",at,[a[0]||(a[0]=t("p",{class:"q-mb-none tw:text-[14px] tw:font-medium tw:text-[#0f1729] tw:dark:text-[#fff]"}," Total de Tickets ",-1)),w(g(_),{icon:"hugeicons:ticket-02",class:"tw:text-blue-600"})]),t("p",ot,u(o.value.totalTickets),1)]),t("div",rt,[t("div",nt,[a[1]||(a[1]=t("p",{class:"q-mb-none tw:text-[14px] tw:font-medium tw:text-[#0f1729] tw:dark:text-[#fff]"},"Em progresso",-1)),w(g(_),{icon:"hugeicons:clock-01",class:"tw:text-orange-600"})]),t("p",it,u(o.value.totalTicketsNaoEncerradosOuCancelados),1)]),t("div",lt,[t("div",dt,[a[2]||(a[2]=t("p",{class:"q-mb-none tw:text-[14px] tw:font-medium tw:text-[#0f1729] tw:dark:text-[#fff]"}," Total de clientes ",-1)),w(g(_),{icon:"tabler:building",class:"tw:text-green-600"})]),t("p",ct,u(o.value.totalClientes),1)]),t("div",wt,[t("div",ut,[a[3]||(a[3]=t("p",{class:"q-mb-none tw:text-[14px] tw:font-medium tw:text-[#0f1729] tw:dark:text-[#fff]"}," Total de usuários ",-1)),w(g(_),{icon:"hugeicons:user-02",class:"tw:text-blue-600"})]),t("p",pt,u(o.value.totalUsuarios),1)])]),w(Q),w(K)])])]))}};export{bt as default};
